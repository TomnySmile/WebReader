<!DOCTYPE html>
<html xmlns:ng="http://angularjs.org">
<head>
	<meta charset="utf-8">
	<meta http-equiv="Pragma" content="no-cache">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>阅读器</title>

	<script type="text/javascript" src="/js/jquery.js"></script>
	<script type="text/javascript" src="/js/angular.js"></script>

	<script type="text/javascript" src="/js/service.js"></script>
	<script type="text/javascript" src="/js/reader.js"></script>

	<meta name="viewport" content="minimal-ui user-scalable=no, width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="renderer" content="webkit">

	<style type="text/css">
	#screen{
		width: 100%;
		height: 100%;
		color: #AAA;
		background: #F6F4EC;
		/*background: #777;*/
		padding: 0;
		margin: 0;
	}
	html{
		font-size: 16px;
	}
	body {
		font-family:"Helvetica Neue",Helvetica,"Lucida Grande","Luxi Sans",Arial,"Hiragino Sans GB",STHeiti,"Microsoft YaHei","Wenquanyi Micro Hei","WenQuanYi Micro Hei Mono","WenQuanYi Zen Hei","WenQuanYi Zen Hei Mono",LiGothicMed;
		overflow-x: hidden;
		overflow-y: hidden;
	}
	*{
		margin: 0;
		padding: 0;
	}
	.page{
		margin: 0;
		padding: 0;
	}
	.page .hd, .page .ft{
		color: #4C4C4C;
		height: 1.5rem;
		line-height: 1.5rem;
		font-size: .7rem;
		vertical-align: middle;
		z-index: 10;
		overflow: hidden hidden;
	}
	.page .hd{
		border-bottom: 1px solid #AAA;
	}
	.page .hd h3{
		text-align: left;
	}
	.page .ft{
		text-align: center;
	}
	.page .bd{
		overflow: hidden;
		padding: 0em 0em;
		color: #000;
		z-index: 0;
		padding: 0;
		margin: 0;
		height: 100%;
		width: 100%;

	}
	.page .bd .content: {
		overflow: hidden;
		position:relative;
	}
	.content p{
		text-indent: 2rem;
		word-wrap: break-word;
		text-align:left;
		margin: 0;
	}

	.content p.quote{
		font-style: italic;
		font-size: .8rem;
	}

	.content p.left{
		text-align: left;
	}
	.content p.right{
		text-align: right;
	}
	.content p.center{
		text-align: center;
		text-indent: 0;
	}
	.content p.bold{
		font-weight: bold;
		font-size: 1.2rem;
	}

	.list-content{
		overflow-y: scroll;
		font-size: .7rem;
	}

	[ng-click]{
		cursor: pointer;
	}
</style>

<body ng-app="reader" class="ng-app:reader">
	<div ng-controller="ReaderController">
		<!-- <div>-{{curpage.offh}}</div> -->
		<div id="screen" ng-style="{height:style.screenheight+'px',width:style.screenwidth+'px'}">
			<div class="page curr-page" ng-style="{height:style.pageheight+'px',width:style.pagewidth+'px'}">
				<div class="hd">
					<h3>{{cont.title}}</h3>
				</div>
				<div class="bd" ng-style="{width:style.bdwidth+'px', height:style.bdheight+'px', margin:style.contmarginy+'px '+style.contmarginx+'px', 'font-size':style.fontsize+'px'}">
					<div ng-if="!showlist" class="content" ng-style="{height:style.contheight+'px', width:style.contwidth+'px', 'margin-top':'-'+curpage.offh+'px'}">
						<p ng-repeat="c in curpage.conts track by $index" class="paragraph {{c.data.format.p_align}}" ng-class="{'quote':c.data.format.p_quote, 'bold':c.data.format.p_bold}" ng-style="{width:style.contwidth+'px', 'line-height':style.lineheight+'rem', 'font-size':style.fontsize+'px'}">{{c.data.text}}</p>
					</div>

					<div ng-if="showlist" class="content list-content" ng-style="{height:style.contheight+'px', width:style.contwidth+'px'}">
						<ul style="list-style-type: upper-hexadecimal;text-align: left;">
							<li ng-repeat="t in toc.toc track by $index" ng-if="t.level==0" ng-click="load(t.part_no)">{{t.title}}</li>
						</ul>
					</div>
				</div>

				<div class="ft">
					<span ng-click="showlist=!showlist">#</span>
					<span ng-click="prePage()">上一页</span>
					{{page_no+1}}/{{page_count}}
					<span ng-click="nxtPage()">下一页</span>
				</div>
			</div>
		</div>
	</div>
</body>
</html>